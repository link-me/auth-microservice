# Roadmap

Цели для Auth Microservice (Go Gin + Redis)

Короткая перспектива (1–2 недели)
- Базовые эндпоинты: регистрация, логин, refresh, logout, `GET /me`.
- Токены: JWT (access/refresh), безопасная подпись (HS256/ES256), ротация refresh.
- Хеширование паролей: `argon2id` (или `bcrypt`), соль, параметры по OWASP.
- Сессии: хранение refresh‑токенов/сеансов в Redis (blacklist/allowlist).
- Конфигурация: env (`JWT_SECRET`, `ACCESS_TTL`, `REFRESH_TTL`, `REDIS_URL`), валидация.
- Валидация ввода: email/пароль, нормализация, rate‑limit на логин.
- Тесты: unit (хеширование/JWT), интеграционные (эндпоинты, Redis), постман‑коллекция.
- Качество кода: `golangci-lint`, `gofmt`, `go vet`, pre-commit hooks.
- CI: GitHub Actions (Go 1.x), линтеры, тесты, кэш модулей.

Средняя перспектива (3–6 недель)
- RBAC: роли и права, мидлвар проверки доступа.
- OAuth2/OpenID Connect: Google/GitHub провайдеры, связывание аккаунта.
- Уведомления: подтверждение email, сброс пароля, ограничение частоты.
- Аудит: логирование входов/выходов, важные действия, корреляция `request_id`.
- Админ API: блокировка пользователя, принудительный logout, управление ролями.
- Документация: OpenAPI/Swagger, примеры запросов, схемы токенов.
- Контейнеризация: Dockerfile, compose (Gin + Redis + [DB]).

Дальняя перспектива (6+ недель)
- Multi‑tenant: разграничение по арендаторам, изоляция данных.
- SSO/SAML: интеграция с корпоративными провайдерами.
- Политики безопасности: 2FA/TOTP/WebAuthn, требования к паролю, деактивация.
- Масштабирование: stateless access‑токены, горизонтальная ротация refresh, Redis Cluster.
- Наблюдаемость: метрики (успех/ошибки, latency), трассировка (OTEL), алерты.

Технические заметки
- JWT: короткий TTL для access, длинный для refresh; ротация при каждом обновлении.
- Redis ключи: `session:{user_id}:{refresh_id}` с TTL; хранить fingerprint/ua/ip.
- Ошибки: единый JSON формат, коды и причины; избегать утечки деталей.
- Безопасность: CSRF неактуален для чистого API, но соблюдать CORS; ограничивать размер тела.
- Конфиги: разделить dev/prod; секреты только из env/secret‑storage.